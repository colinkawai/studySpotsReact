{"ast":null,"code":"var _jsxFileName = \"/Users/colinkawai/mapreacdt/src/App.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { GoogleApiWrapper, InfoWindow, Marker } from \"google-maps-react\";\nimport Map from \"../src/components/index.js\";\nimport axios from \"axios\";\nconst API_KEY = `${process.env.REACT_APP_API_KEY}`;\nexport class MapContainer extends React.Component {\n  constructor(_props) {\n    super(_props);\n\n    this.onMarkerClick = (props, marker, e) => {\n      this.setState({\n        selectedPlace: props,\n        activeMarker: marker,\n        showingInfoWindow: true\n      });\n      console.log(props);\n    };\n\n    this.onMapClicked = props => {\n      if (this.state.showingInfoWindow) {\n        this.setState({\n          showingInfoWindow: false,\n          activeMarker: null\n        });\n      }\n    };\n\n    this.state = {\n      showingInfoWindow: false,\n      activeMarker: {},\n      selectedPlace: {},\n      // an array of lngs and lats\n      addresses: [],\n      locations: [],\n      names: [],\n      hours: [],\n      ratings: [],\n      currentLocation: {\n        lat: \"\",\n        lng: \"\"\n      }\n    };\n    this.handleLocationChange = this.handleLocationChange.bind(this);\n    this.getMapInfo = this.getMapInfo.bind(this);\n    this.centerMoved = this.centerMoved.bind(this);\n    this.onMarkerClick = this.onMarkerClick.bind(this);\n  }\n\n  getMapInfo() {\n    axios.get(`${\"https://cors-anywhere.herokuapp.com/\"}https://api.yelp.com/v3/businesses/search?`, {\n      headers: {\n        Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n      },\n      params: {\n        categories: \"coffee, libraries\",\n        latitude: this.state.currentLocation.lat,\n        longitude: this.state.currentLocation.lng,\n        limit: 50\n      }\n    }) // set state for locations, names\n    .then(res => {\n      for (var key in res.data.businesses) {\n        this.setState({\n          locations: this.state.locations.concat(JSON.stringify(res.data.businesses[key].coordinates)),\n          names: this.state.names.concat(res.data.businesses[key].name),\n          ratings: this.state.ratings.concat(res.data.businesses[key].rating)\n        });\n      }\n    }).catch(err => {\n      console.log(\"Yelp API call error\");\n    });\n  }\n\n  centerMoved(mapProps, map) {\n    this.setState({\n      currentLocation: {\n        lat: map.center.lat(),\n        lng: map.center.lng()\n      }\n    }, () => {\n      this.getMapInfo();\n    });\n  } //after a location change call after recall the api\n  // using a setState callback (setState(updater, callback))\n\n\n  handleLocationChange(lat, lng) {\n    this.setState({\n      currentLocation: {\n        lat: lat,\n        lng: lng\n      }\n    }, () => {\n      this.getMapInfo();\n    });\n  } // if a user clicks redo search in this area, call set state\n  // which will re render everything\n  // how to create event listeners for a component\n\n\n  render() {\n    const names = this.state.names;\n    const locations = this.state.locations;\n    const ratings = this.state.ratings;\n    var elements = [];\n\n    for (var i = 0; i < names.length; i++) {\n      elements.push(React.createElement(Marker, {\n        onClick: this.onMarkerClick,\n        title: names[i],\n        name: names[i],\n        position: {\n          lat: locations[i].latitude,\n          lng: locations[i].longitude\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }));\n    } // loaded prop is from the GoogleApiComponent\n\n\n    return (//getting a reference to a google object\n      React.createElement(Map, {\n        centerAroundCurrentLocation: true,\n        google: this.props.google,\n        style: {\n          width: \"100%\",\n          height: \"100%\",\n          position: \"relative\"\n        },\n        className: \"map\",\n        zoom: 14,\n        onClick: this.onMapClicked,\n        onDragend: this.centerMoved,\n        onLocationChange: this.handleLocationChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, elements, React.createElement(InfoWindow, {\n        marker: this.state.activeMarker,\n        visible: this.state.showingInfoWindow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, this.state.selectedPlace.title), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, this.state.selectedPlace.position.toString()))))\n    );\n  }\n\n} //Higher Order Component that provides wrapper around Google APIs\n//Can be configured by passing a function that will be called with the wrapped component's props\n\nexport default GoogleApiWrapper({\n  apiKey: \"AIzaSyBFUHG2hhGRTX-FTfz3nwMMNPXKHvqGxZ8\"\n})(MapContainer);","map":{"version":3,"sources":["/Users/colinkawai/mapreacdt/src/App.js"],"names":["React","ReactDOM","GoogleApiWrapper","InfoWindow","Marker","Map","axios","API_KEY","process","env","REACT_APP_API_KEY","MapContainer","Component","constructor","props","onMarkerClick","marker","e","setState","selectedPlace","activeMarker","showingInfoWindow","console","log","onMapClicked","state","addresses","locations","names","hours","ratings","currentLocation","lat","lng","handleLocationChange","bind","getMapInfo","centerMoved","get","headers","Authorization","params","categories","latitude","longitude","limit","then","res","key","data","businesses","concat","JSON","stringify","coordinates","name","rating","catch","err","mapProps","map","center","render","elements","i","length","push","google","width","height","position","title","toString","apiKey"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { GoogleApiWrapper, InfoWindow, Marker } from \"google-maps-react\";\nimport Map from \"../src/components/index.js\";\nimport axios from \"axios\";\n\nconst API_KEY = `${process.env.REACT_APP_API_KEY}`;\n\nexport class MapContainer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      showingInfoWindow: false,\n      activeMarker: {},\n      selectedPlace: {},\n      // an array of lngs and lats\n      addresses: [],\n      locations: [],\n      names: [],\n      hours: [],\n      ratings: [],\n      currentLocation: {\n        lat: \"\",\n        lng: \"\"\n      }\n    };\n    this.handleLocationChange = this.handleLocationChange.bind(this);\n    this.getMapInfo = this.getMapInfo.bind(this);\n    this.centerMoved = this.centerMoved.bind(this);\n    this.onMarkerClick = this.onMarkerClick.bind(this);\n  }\n\n  getMapInfo() {\n    axios\n      .get(\n        `${\"https://cors-anywhere.herokuapp.com/\"}https://api.yelp.com/v3/businesses/search?`,\n        {\n          headers: {\n            Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n          },\n          params: {\n            categories: \"coffee, libraries\",\n            latitude: this.state.currentLocation.lat,\n            longitude: this.state.currentLocation.lng,\n            limit: 50\n          }\n        }\n      )\n      // set state for locations, names\n      .then(res => {\n        for (var key in res.data.businesses) {\n          this.setState({\n            locations: this.state.locations.concat(\n              JSON.stringify(res.data.businesses[key].coordinates)\n            ),\n            names: this.state.names.concat(res.data.businesses[key].name),\n            ratings: this.state.ratings.concat(res.data.businesses[key].rating)\n          });\n        }\n      })\n      .catch(err => {\n        console.log(\"Yelp API call error\");\n      });\n  }\n\n  onMarkerClick = (props, marker, e) => {\n    this.setState({\n      selectedPlace: props,\n      activeMarker: marker,\n      showingInfoWindow: true\n    });\n    console.log(props);\n  };\n  onMapClicked = props => {\n    if (this.state.showingInfoWindow) {\n      this.setState({\n        showingInfoWindow: false,\n        activeMarker: null\n      });\n    }\n  };\n\n  centerMoved(mapProps, map) {\n    this.setState(\n      {\n        currentLocation: {\n          lat: map.center.lat(),\n          lng: map.center.lng()\n        }\n      },\n      () => {\n        this.getMapInfo();\n      }\n    );\n  }\n\n  //after a location change call after recall the api\n  // using a setState callback (setState(updater, callback))\n  handleLocationChange(lat, lng) {\n    this.setState(\n      {\n        currentLocation: {\n          lat: lat,\n          lng: lng\n        }\n      },\n      () => {\n        this.getMapInfo();\n      }\n    );\n  }\n\n  // if a user clicks redo search in this area, call set state\n  // which will re render everything\n  // how to create event listeners for a component\n  render() {\n    const names = this.state.names;\n    const locations = this.state.locations;\n\n    const ratings = this.state.ratings;\n    var elements = [];\n    for (var i = 0; i < names.length; i++) {\n      elements.push(\n        <Marker\n          onClick={this.onMarkerClick}\n          title={names[i]}\n          name={names[i]}\n          position={{\n            lat: locations[i].latitude,\n            lng: locations[i].longitude\n          }}\n        />\n      );\n    }\n    // loaded prop is from the GoogleApiComponent\n    return (\n      //getting a reference to a google object\n      <Map\n        centerAroundCurrentLocation\n        google={this.props.google}\n        style={{ width: \"100%\", height: \"100%\", position: \"relative\" }}\n        className={\"map\"}\n        zoom={14}\n        onClick={this.onMapClicked}\n        onDragend={this.centerMoved}\n        onLocationChange={this.handleLocationChange}\n      >\n        {elements}\n        <InfoWindow\n          marker={this.state.activeMarker}\n          visible={this.state.showingInfoWindow}\n        >\n          <div>\n            <h1>{this.state.selectedPlace.title}</h1>\n            <h2>{this.state.selectedPlace.position.toString()}</h2>\n          </div>\n        </InfoWindow>\n      </Map>\n    );\n  }\n}\n\n//Higher Order Component that provides wrapper around Google APIs\n//Can be configured by passing a function that will be called with the wrapped component's props\nexport default GoogleApiWrapper({\n  apiKey: \"AIzaSyBFUHG2hhGRTX-FTfz3nwMMNPXKHvqGxZ8\"\n})(MapContainer);\n"]},"metadata":{},"sourceType":"module"}