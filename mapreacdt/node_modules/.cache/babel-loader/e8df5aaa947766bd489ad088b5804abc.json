{"ast":null,"code":"var _jsxFileName = \"/Users/colinkawai/mapreacdt/src/App.js\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { GoogleApiWrapper, InfoWindow, Marker } from \"google-maps-react\";\nimport Map from \"../src/components/index.js\";\nimport axios from \"axios\";\nconst API_KEY = `${process.env.REACT_APP_API_KEY}`;\nexport class MapContainer extends React.Component {\n  constructor(_props) {\n    super(_props);\n\n    this.onMarkerClick = (props, marker, e) => this.setState({\n      selectedPlace: props,\n      activeMarker: marker,\n      showingInfoWindow: true\n    });\n\n    this.onMapClicked = props => {\n      if (this.state.showingInfoWindow) {\n        this.setState({\n          showingInfoWindow: false,\n          activeMarker: null\n        });\n      }\n    };\n\n    this.state = {\n      showingInfoWindow: false,\n      activeMarker: {},\n      selectedPlace: {},\n      // an array of lngs and lats\n      locations: [],\n      names: [],\n      hours: [],\n      ratings: [],\n      currentLocation: {\n        lat: \"\",\n        lng: \"\"\n      }\n    };\n    this.handleLocationChange = this.handleLocationChange.bind(this);\n    this.getMapInfo = this.getMapInfo.bind(this);\n    this.centerMoved = this.centerMoved.bind(this);\n  }\n\n  getMapInfo() {\n    axios.get(`${\"https://cors-anywhere.herokuapp.com/\"}https://api.yelp.com/v3/businesses/search?`, {\n      headers: {\n        Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n      },\n      params: {\n        categories: \"coffee, Coffee & Tea, libraries\",\n        latitude: this.state.currentLocation.lat,\n        longitude: this.state.currentLocation.lng\n      }\n    }) // set state for locations, names\n    .then(res => {\n      // this.setState({\n      //  locations: this.state.locations.concat(res.business[0])\n      // });\n      for (var key in res.data.businesses) {\n        this.setState({\n          locations: this.state.locations.concat(res.data.businesses[key].coordinates),\n          names: this.state.names.concat(res.data.businesses[key].name),\n          ratings: this.state.ratings.concat(res.data.businesses[key].rating)\n        });\n      } //for (var key in res.data.businesses) {\n      // console.log(res.data.businesses[key].coordinates);\n      //}\n\n    }).catch(err => {\n      console.log(\"Yelp API call error\");\n    });\n  }\n\n  centerMoved(mapProps, map) {\n    this.setState({\n      currentLocation: {\n        lat: map.center.lat(),\n        lng: map.center.lng()\n      }\n    }, () => {\n      this.getMapInfo();\n    });\n  } //after a location change call after recall the api\n  // using a setState callback (setState(updater, callback))\n\n\n  handleLocationChange(lat, lng) {\n    this.setState({\n      currentLocation: {\n        lat: lat,\n        lng: lng\n      }\n    }, () => {\n      this.getMapInfo();\n    });\n  } // if a user clicks redo search in this area, call set state\n  // which will re render everything\n  // how to create event listeners for a component\n\n\n  render() {\n    const names = this.state.names;\n    const locations = this.state.locations;\n    const ratings = this.state.ratings;\n    var elements = [];\n\n    for (var i = 0; i < names.length; i++) {\n      elements.push(React.createElement(Marker, {\n        onClick: this.onMarkerClick,\n        title: names[i],\n        name: names[i],\n        position: {\n          lat: locations[i].latitude,\n          lng: locations[i].longitude\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }));\n    } // loaded prop is from the GoogleApiComponent\n\n\n    return (//getting a reference to a google object\n      React.createElement(Map, {\n        centerAroundCurrentLocation: true,\n        google: this.props.google,\n        style: {\n          width: \"100%\",\n          height: \"100%\",\n          position: \"relative\"\n        },\n        className: \"map\",\n        zoom: 14,\n        onClick: this.onMapClicked,\n        onDragend: this.centerMoved,\n        onLocationChange: this.handleLocationChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, elements, React.createElement(InfoWindow, {\n        marker: this.state.activeMarker,\n        visible: this.state.showingInfoWindow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, this.state.selectedPlace.name))))\n    );\n  }\n\n} //Higher Order Component that provides wrapper around Google APIs\n//Can be configured by passing a function that will be called with the wrapped component's props\n\nexport default GoogleApiWrapper({\n  apiKey: \"AIzaSyBFUHG2hhGRTX-FTfz3nwMMNPXKHvqGxZ8\"\n})(MapContainer);\n/*<Marker\n          onClick={this.onMarkerClick}\n          title={\"The marker`s title will appear as a tooltip.\"}\n          name={\"SOMA\"}\n          position={{ lat: 37.778519, lng: -122.40564 }}\n        />*/","map":{"version":3,"sources":["/Users/colinkawai/mapreacdt/src/App.js"],"names":["React","ReactDOM","GoogleApiWrapper","InfoWindow","Marker","Map","axios","API_KEY","process","env","REACT_APP_API_KEY","MapContainer","Component","constructor","props","onMarkerClick","marker","e","setState","selectedPlace","activeMarker","showingInfoWindow","onMapClicked","state","locations","names","hours","ratings","currentLocation","lat","lng","handleLocationChange","bind","getMapInfo","centerMoved","get","headers","Authorization","params","categories","latitude","longitude","then","res","key","data","businesses","concat","coordinates","name","rating","catch","err","console","log","mapProps","map","center","render","elements","i","length","push","google","width","height","position","apiKey"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { GoogleApiWrapper, InfoWindow, Marker } from \"google-maps-react\";\nimport Map from \"../src/components/index.js\";\nimport axios from \"axios\";\n\nconst API_KEY = `${process.env.REACT_APP_API_KEY}`;\n\nexport class MapContainer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      showingInfoWindow: false,\n      activeMarker: {},\n      selectedPlace: {},\n      // an array of lngs and lats\n      locations: [],\n      names: [],\n      hours: [],\n      ratings: [],\n      currentLocation: {\n        lat: \"\",\n        lng: \"\"\n      }\n    };\n    this.handleLocationChange = this.handleLocationChange.bind(this);\n    this.getMapInfo = this.getMapInfo.bind(this);\n    this.centerMoved = this.centerMoved.bind(this);\n  }\n\n  getMapInfo() {\n    axios\n      .get(\n        `${\"https://cors-anywhere.herokuapp.com/\"}https://api.yelp.com/v3/businesses/search?`,\n        {\n          headers: {\n            Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n          },\n          params: {\n            categories: \"coffee, Coffee & Tea, libraries\",\n            latitude: this.state.currentLocation.lat,\n            longitude: this.state.currentLocation.lng\n          }\n        }\n      )\n      // set state for locations, names\n      .then(res => {\n        // this.setState({\n        //  locations: this.state.locations.concat(res.business[0])\n        // });\n        for (var key in res.data.businesses) {\n          this.setState({\n            locations: this.state.locations.concat(\n              res.data.businesses[key].coordinates\n            ),\n            names: this.state.names.concat(res.data.businesses[key].name),\n            ratings: this.state.ratings.concat(res.data.businesses[key].rating)\n          });\n        }\n        //for (var key in res.data.businesses) {\n        // console.log(res.data.businesses[key].coordinates);\n        //}\n      })\n      .catch(err => {\n        console.log(\"Yelp API call error\");\n      });\n  }\n\n  onMarkerClick = (props, marker, e) =>\n    this.setState({\n      selectedPlace: props,\n      activeMarker: marker,\n      showingInfoWindow: true\n    });\n\n  onMapClicked = props => {\n    if (this.state.showingInfoWindow) {\n      this.setState({\n        showingInfoWindow: false,\n        activeMarker: null\n      });\n    }\n  };\n\n  centerMoved(mapProps, map) {\n    this.setState(\n      {\n        currentLocation: {\n          lat: map.center.lat(),\n          lng: map.center.lng()\n        }\n      },\n      () => {\n        this.getMapInfo();\n      }\n    );\n  }\n\n  //after a location change call after recall the api\n  // using a setState callback (setState(updater, callback))\n  handleLocationChange(lat, lng) {\n    this.setState(\n      {\n        currentLocation: {\n          lat: lat,\n          lng: lng\n        }\n      },\n      () => {\n        this.getMapInfo();\n      }\n    );\n  }\n\n  // if a user clicks redo search in this area, call set state\n  // which will re render everything\n  // how to create event listeners for a component\n  render() {\n    const names = this.state.names;\n    const locations = this.state.locations;\n\n    const ratings = this.state.ratings;\n    var elements = [];\n    for (var i = 0; i < names.length; i++) {\n      elements.push(\n        <Marker\n          onClick={this.onMarkerClick}\n          title={names[i]}\n          name={names[i]}\n          position={{\n            lat: locations[i].latitude,\n            lng: locations[i].longitude\n          }}\n        />\n      );\n    }\n    // loaded prop is from the GoogleApiComponent\n    return (\n      //getting a reference to a google object\n      <Map\n        centerAroundCurrentLocation\n        google={this.props.google}\n        style={{ width: \"100%\", height: \"100%\", position: \"relative\" }}\n        className={\"map\"}\n        zoom={14}\n        onClick={this.onMapClicked}\n        onDragend={this.centerMoved}\n        onLocationChange={this.handleLocationChange}\n      >\n        {elements}\n        <InfoWindow\n          marker={this.state.activeMarker}\n          visible={this.state.showingInfoWindow}\n        >\n          <div>\n            <h1>{this.state.selectedPlace.name}</h1>\n          </div>\n        </InfoWindow>\n      </Map>\n    );\n  }\n}\n\n//Higher Order Component that provides wrapper around Google APIs\n//Can be configured by passing a function that will be called with the wrapped component's props\nexport default GoogleApiWrapper({\n  apiKey: \"AIzaSyBFUHG2hhGRTX-FTfz3nwMMNPXKHvqGxZ8\"\n})(MapContainer);\n/*<Marker\n          onClick={this.onMarkerClick}\n          title={\"The marker`s title will appear as a tooltip.\"}\n          name={\"SOMA\"}\n          position={{ lat: 37.778519, lng: -122.40564 }}\n        />*/\n"]},"metadata":{},"sourceType":"module"}